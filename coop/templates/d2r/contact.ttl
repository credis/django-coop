# As for Area, the Table has to be split
# COMM_MEANS = Choices(
#     ('LAND',    1,  _(u'Landline phone')),
#     ('GSM',     2,  _(u'Mobile phone')),
#     ('FAX',     3,  _(u'Fax')),
#     ('SKYPE',   4,  _(u'Skype')),
#     ('TWITTER', 5,  _(u'Twitter')),
#     ('RSS',     6,  _(u'RSS Feed')),
#     ('VCAL',    7,  _(u'vCalendar')),
#     ('MAIL',    8,  _(u'E-mail')),
#     ('WEB',     9,  _(u'Secondary web site')),
# )



# Table coop_local_contact

map:tel a d2rq:ClassMap;                    # Intermediary table, to be able to discard upon
    d2rq:dataStorage map:database;          # type. I have found no way to do it cleaner....
    #d2rq:class v:Tel;                      # And we have to do it, even if it seems useless
    {% if mode == 'view' %}
    d2rq:uriPattern "contact/@@coop_local_contact.id@@/";
    {% else %}
    d2rq:uriColumn "coop_local_contact.uri";
    {% endif %}
    d2rq:condition "coop_local_contact.category = '1'";
    .
map:tel_type a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:tel;
    d2rq:property rdf:type;
    d2rq:constantValue v:Tel;
    d2rq:alias "coop_local_contact AS contactTel";
    d2rq:condition "contactTel.category = 1";
    .
map:gsm a d2rq:ClassMap;
    d2rq:dataStorage map:database;
    {% if mode == 'view' %}
    d2rq:uriPattern "contact/@@coop_local_contact.id@@/";
    {% else %}
    d2rq:uriColumn "coop_local_contact.uri";
    {% endif %}
    d2rq:condition "coop_local_contact.category = '2'";
    .
map:gsm_type a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:gsm;
    d2rq:property rdf:type;
    d2rq:constantValue v:Cell;
    d2rq:alias "coop_local_contact AS contactCell";
    d2rq:condition "contactCell.category = 2";
    .
map:fax a d2rq:ClassMap;
    d2rq:dataStorage map:database;
    {% if mode == 'view' %}
    d2rq:uriPattern "contact/@@coop_local_contact.id@@/";
    {% else %}
    d2rq:uriColumn "coop_local_contact.uri";
    {% endif %}
    d2rq:condition "coop_local_contact.category = '3'";
    .
map:fax_type a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:fax;
    d2rq:property rdf:type;
    d2rq:constantValue v:Fax;
    d2rq:alias "coop_local_contact AS contactFax";
    d2rq:condition "contactFax.category = 3";
    .
map:skype a d2rq:ClassMap;
    d2rq:dataStorage map:database;
    {% if mode == 'view' %}
    d2rq:uriPattern "contact/@@coop_local_contact.id@@/";
    {% else %}
    d2rq:uriColumn "coop_local_contact.uri";
    {% endif %}
    d2rq:condition "coop_local_contact.category = '4'";
    .
map:skype_type a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:skype;
    d2rq:property rdf:type;
    d2rq:constantValue ess:Skype;
    d2rq:alias "coop_local_contact AS contactSkype";
    d2rq:condition "contactSkype.category = 4";
    .
map:twitter a d2rq:ClassMap;
    d2rq:dataStorage map:database;
    {% if mode == 'view' %}
    d2rq:uriPattern "contact/@@coop_local_contact.id@@/";
    {% else %}
    d2rq:uriColumn "coop_local_contact.uri";
    {% endif %}
    d2rq:condition "coop_local_contact.category = '5'";
    .
map:twitter_type a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:twitter;
    d2rq:property rdf:type;
    d2rq:constantValue sioc:Post;
    d2rq:alias "coop_local_contact AS contactTwitter";
    d2rq:condition "contactTwitter.category = 5";
    .
map:rss a d2rq:ClassMap;
    d2rq:dataStorage map:database;
    {% if mode == 'view' %}
    d2rq:uriPattern "contact/@@coop_local_contact.id@@/";
    {% else %}
    d2rq:uriColumn "coop_local_contact.uri";
    {% endif %}
    d2rq:condition "coop_local_contact.category = '6'";
    .
map:rss_type a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:rss;
    d2rq:property rdf:type;
    d2rq:constantValue rss:Channel;              # TOBE discuss, see also dcat:Feed
    d2rq:alias "coop_local_contact AS contactRss";
    d2rq:condition "contactRss.category = 6";
    .
map:cal a d2rq:ClassMap;
    d2rq:dataStorage map:database;
    {% if mode == 'view' %}
    d2rq:uriPattern "contact/@@coop_local_contact.id@@/";
    {% else %}
    d2rq:uriColumn "coop_local_contact.uri";
    {% endif %}
    d2rq:condition "coop_local_contact.category = '7'";
    .
map:cal_type a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:cal;
    d2rq:property rdf:type;
    d2rq:constantValue event:Event;              
    d2rq:alias "coop_local_contact AS contactCal";
    d2rq:condition "contactCal.category = 7";
    .
map:email a d2rq:ClassMap;
    d2rq:dataStorage map:database;
    {% if mode == 'view' %}
    d2rq:uriPattern "contact/@@coop_local_contact.id@@/";
    {% else %}
    d2rq:uriColumn "coop_local_contact.uri";
    {% endif %}
    d2rq:condition "coop_local_contact.category = '8'";
    .
map:email_type a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:email;
    d2rq:property rdf:type;
    d2rq:constantValue v:Email;
    d2rq:alias "coop_local_contact AS contactEmail";
    d2rq:condition "contactEmail.category = 8";
    .
map:web a d2rq:ClassMap;
    d2rq:dataStorage map:database;
    {% if mode == 'view' %}
    d2rq:uriPattern "contact/@@coop_local_contact.id@@/";
    {% else %}
    d2rq:uriColumn "coop_local_contact.uri";
    {% endif %}
    d2rq:condition "coop_local_contact.category = '9'";
    .
map:web_type a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:web;
    d2rq:property rdf:type;
    d2rq:constantValue sioc:Site;
    d2rq:alias "coop_local_contact AS contactWeb";
    d2rq:condition "contactWeb.category = 9";
    .

map:contact a d2rq:ClassMap;
    d2rq:dataStorage map:database;
    {% if mode == 'view' %}
    d2rq:uriPattern "contact/@@coop_local_contact.id@@/";
    {% else %}
    d2rq:uriColumn "coop_local_contact.uri";
    {% endif %}
    .
map:contact__label a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:contact;
    d2rq:property rdfs:label;
    d2rq:pattern "coop_local_contact #@@coop_local_contact.id@@";
    .
map:contact_content a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:contact;
    d2rq:property rdf:value;
    d2rq:propertyDefinitionLabel "coop_local_contact content";
    d2rq:column "coop_local_contact.content";
    .
map:contact_details a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:contact;
    d2rq:property dct:description;
    d2rq:propertyDefinitionLabel "coop_local_contact details";
    d2rq:column "coop_local_contact.details";
    .
map:contact_created a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:contact;
    d2rq:property dct:created;
    d2rq:column "coop_local_contact.created";
    d2rq:datatype xsd:dateTime;
    .
map:contact_modified a d2rq:PropertyBridge;
    d2rq:belongsToClassMap map:contact;
    d2rq:property dct:modified;
    d2rq:column "coop_local_contact.modified";
    d2rq:datatype xsd:dateTime;
    .
